<template>
  <div>
    <div class="htc-node" v-if="data.htc">
      <div class="htc-default-node"></div>
      <div class="htc-default-node"></div>
      <div class="htc-default-node"></div>
    </div>
    <div class="default-node tooltip" v-else>
      <!-- <div class="left-side">
        <svg t="1642575471591" class="icon cursor-pointer" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4958" width="16" height="16" @click="contextMenu($event)"><path d="M512 305.318a205.708 205.708 0 1 0 205.708 205.709A205.708 205.708 0 0 0 512 305.318z m0 346.2a140.816 140.816 0 1 1 140.816-140.816A140.816 140.816 0 0 1 512 651.842z" p-id="4959" fill="#5c5c5c"></path><path d="M958.783 393.572L885.78 382.54a391.95 391.95 0 0 0-16.872-40.882l44.127-60.026a64.892 64.892 0 0 0 0-91.822l-77.222-77.87a64.892 64.892 0 0 0-91.822 0l-59.052 43.801a392.274 392.274 0 0 0-40.882-17.196L632.7 64.892A64.892 64.892 0 0 0 567.807 0H458.464a64.892 64.892 0 0 0-64.892 64.892l-11.032 72.68a392.598 392.598 0 0 0-40.882 16.872l-60.35-44.127a64.892 64.892 0 0 0-91.823 0l-77.546 77.546a64.892 64.892 0 0 0 0 91.823l44.127 60.025a392.274 392.274 0 0 0-16.548 39.909l-74.626 9.734A64.892 64.892 0 0 0 0 454.246v109.668a64.892 64.892 0 0 0 64.892 64.892l74.302 11.356a392.274 392.274 0 0 0 16.223 41.207l-45.1 60.999a64.892 64.892 0 0 0 0 91.822l77.546 77.546a64.892 64.892 0 0 0 91.823 0l60.674-44.775a392.598 392.598 0 0 0 39.26 16.547l11.356 75.6A64.892 64.892 0 0 0 455.868 1024h109.668a64.892 64.892 0 0 0 64.892-64.892l11.357-74.302a392.923 392.923 0 0 0 39.584-16.223l61.323 45.1a64.892 64.892 0 0 0 91.823 0l77.546-77.546a64.892 64.892 0 0 0 0-91.823l-44.127-60.025a392.274 392.274 0 0 0 16.872-39.909l74.626-11.356a64.892 64.892 0 0 0 64.892-64.892V458.464a64.892 64.892 0 0 0-65.54-64.892z m0 174.56h-9.734l-74.626 11.356-38.286 5.84-12.979 36.34a329.328 329.328 0 0 1-13.951 32.446L792.01 689.48l23.361 32.446 44.127 60.026 2.92 3.893 3.57 3.57-77.547 78.195-3.569-3.57-3.894-2.92-61.323-45.1-32.446-23.036-33.744 18.17a329.653 329.653 0 0 1-32.446 13.627l-36.989 12.978-6.489 38.287-11.356 74.301v9.734H455.868V949.05l-11.356-75.6-5.84-38.286-36.664-12.978a329.004 329.004 0 0 1-32.447-13.627l-35.366-16.872-32.446 23.036-60.674 44.776-3.894 2.92-3.569 3.57-77.546-77.547 3.569-3.569 2.596-3.894 45.424-61.323 23.037-32.446-16.872-35.042a329.328 329.328 0 0 1-13.627-32.446l-12.654-35.69-38.611-6.49-74.302-11.356h-9.734v-111.94h9.734l74.626-11.355 38.611-5.84 12.979-36.665a329.328 329.328 0 0 1 13.951-32.446l16.872-35.042-23.036-32.446-44.452-59.376-1.946-3.894-4.218-3.569 77.221-77.546 3.57 3.569 3.893 2.596 60.35 44.775 32.446 23.037 35.042-16.872a329.004 329.004 0 0 1 34.068-14.276l36.989-12.979 5.84-38.61 10.058-72.68v-9.734h110.317v9.734l11.356 73.653 4.867 38.286 36.665 12.979a329.004 329.004 0 0 1 34.392 14.276l35.367 17.196 32.446-23.36 59.376-43.479 4.218-1.946 3.57-3.57 77.546 77.547-3.57 3.569-2.92 3.893-44.45 59.377-23.038 32.446 17.521 33.744a328.68 328.68 0 0 1 13.952 34.068l12.654 36.989 38.936 5.84 73.003 11.032h9.734z" p-id="4960" fill="#5c5c5c"></path></svg>
      </div> -->
      <div class="center">
        {{ data.name }}
      </div>
      <div class="right-side">
        <svg t="1642577117055" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7504" width="16" height="16" v-if="data.status === 'success'"><path d="M721.066667 307.2l-328.533334 328.533333-85.333333-149.333333c-8.533333-17.066667-29.866667-25.6-46.933333-17.066667-17.066667 8.533333-21.333333 29.866667-12.8 51.2l106.666666 192c8.533333 12.8 17.066667 17.066667 29.866667 17.066667 4.266667 0 12.8 0 17.066667-4.266667 4.266667 0 4.266667-4.266667 8.533333-8.533333L768 354.133333c12.8-12.8 12.8-38.4 0-51.2-8.533333-12.8-34.133333-12.8-46.933333 4.266667zM512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512S793.6 0 512 0z m311.466667 823.466667c-38.4 38.4-89.6 72.533333-140.8 93.866666-55.466667 21.333333-110.933333 34.133333-170.666667 34.133334s-115.2-12.8-170.666667-34.133334c-51.2-21.333333-98.133333-55.466667-140.8-93.866666-38.4-42.666667-72.533333-89.6-93.866666-140.8-21.333333-55.466667-34.133333-110.933333-34.133334-170.666667s12.8-115.2 34.133334-170.666667C128 290.133333 162.133333 243.2 200.533333 200.533333 243.2 162.133333 290.133333 128 341.333333 106.666667c55.466667-21.333333 110.933333-34.133333 170.666667-34.133334s115.2 12.8 170.666667 34.133334c51.2 21.333333 98.133333 55.466667 140.8 93.866666 38.4 42.666667 72.533333 89.6 93.866666 140.8 21.333333 55.466667 34.133333 110.933333 34.133334 170.666667s-12.8 115.2-34.133334 170.666667c-21.333333 51.2-55.466667 98.133333-93.866666 140.8z" fill="#52c41a" p-id="7505"></path></svg>
        <svg t="1642577153841" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8433" width="16" height="16" v-else-if="data.status === 'error'"><path d="M512 0C229.376 0 0 229.376 0 512s229.376 512 512 512 512-229.376 512-512S794.624 0 512 0z m218.624 672.256c15.872 15.872 15.872 41.984 0 57.856-8.192 8.192-18.432 11.776-29.184 11.776s-20.992-4.096-29.184-11.776L512 569.856l-160.256 160.256c-8.192 8.192-18.432 11.776-29.184 11.776s-20.992-4.096-29.184-11.776c-15.872-15.872-15.872-41.984 0-57.856L454.144 512 293.376 351.744c-15.872-15.872-15.872-41.984 0-57.856 15.872-15.872 41.984-15.872 57.856 0L512 454.144l160.256-160.256c15.872-15.872 41.984-15.872 57.856 0 15.872 15.872 15.872 41.984 0 57.856L569.856 512l160.768 160.256z" fill="#ff0000" p-id="8434"></path></svg>
        <svg t="1642641127756" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2299" width="17" height="17" v-else-if="data.status === 'warning'"><path d="M512 42.666667a469.333333 469.333333 0 1 0 469.333333 469.333333A469.333333 469.333333 0 0 0 512 42.666667z m0 864a394.666667 394.666667 0 1 1 394.666667-394.666667 395.146667 395.146667 0 0 1-394.666667 394.666667z" p-id="2300" fill="#ffa500"></path><path d="M474.666667 695.52m5.333333 0l64 0q5.333333 0 5.333333 5.333333l0 64q0 5.333333-5.333333 5.333334l-64 0q-5.333333 0-5.333333-5.333334l0-64q0-5.333333 5.333333-5.333333Z" p-id="2301" fill="#ffa500"></path><path d="M474.666667 253.813333m5.333333 0l64 0q5.333333 0 5.333333 5.333334l0 362.666666q0 5.333333-5.333333 5.333334l-64 0q-5.333333 0-5.333333-5.333334l0-362.666666q0-5.333333 5.333333-5.333334Z" p-id="2302" fill="#ffa500"></path></svg>
        <svg t="1642577381109" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13110" width="16" height="16" v-else-if="data.status === 'running'"><path d="M640 192c53.02 0 96-42.98 96-96S693.02 0 640 0s-96 42.98-96 96 42.98 96 96 96zM323.38 634.94l-29.6 69.04H160c-35.34 0-64 28.66-64 64s28.66 64 64 64h154.9c38.5 0 73.16-22.88 88.22-58.18l17.58-41.04-21.34-12.6c-34.64-20.46-60.12-50.74-75.98-85.22zM864 447.98h-88.06l-52.12-106.5c-25-51.1-70.9-88.46-123.56-101.88l-142.16-42.28c-56.6-13.6-115.54-1.1-161.68 34.28l-79.34 60.82c-28.06 21.5-33.38 61.66-11.84 89.72s61.68 33.32 89.72 11.84l79.38-60.82c15.34-11.78 34.88-16 50.54-12.28l29.4 8.74-74.92 174.78c-25.24 58.96-2.62 128.02 52.6 160.62l169.96 100.34-54.94 175.46c-10.56 33.72 8.22 69.62 41.94 80.18 6.38 2 12.82 2.96 19.16 2.96 27.22 0 52.46-17.54 61.04-44.9l63.28-202.12c11.82-41.54-5.78-86.16-43.28-108.78l-122.48-72.28 62.62-156.56 40.54 82.86c16 32.68 49.84 53.78 86.22 53.78H864c35.34 0 64-28.66 64-64s-28.66-63.98-64-63.98z" p-id="13111" fill="#0000ff"></path></svg>
        <svg t="1642577466654" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14516" width="16" height="16" v-else><path d="M682.666667 0v256h256l-256-256z m-85.333334 0H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333333v853.333334a85.333333 85.333333 0 0 0 85.333334 85.333333h682.666666a85.333333 85.333333 0 0 0 85.333334-85.333333V341.333333h-341.333334V0z m7.168 514.517333a42.666667 42.666667 0 1 1 70.997334 47.36L481.152 853.333333l-163.498667-109.013333a42.666667 42.666667 0 1 1 47.36-70.997333l92.501334 61.653333 146.986666-220.458667z" p-id="14517" fill="#666666"></path></svg>
      </div>
    </div>
  </div>
</template>

<script>
/* eslint-disable */
import { inject, onMounted, ref } from 'vue';

export default {
  setup() {
    const getNode = inject('getNode');
    const node = getNode();
    const data = ref({ name: '', status: ''});

    const contextMenu = (e) => {
      console.log(e);
    }

    onMounted(() => {
      data.value = node.getData();
      node.on("change:data", ({ current }) => {
        data.value = current;
      });
    })

    return {
      data,
      contextMenu,
    };
  },
};
</script>

<style scoped>
.default-node {
  display: flex;
  width: 200px;
  height: 36px;
  line-height: 36px;
  border-radius: 4px;
  background: #ffffff;
  border: 1px solid #ccd1dc;
  box-shadow: 0 2px 5px 1px rgb(0 0 0 / 6%);
  color: #5c5c5c;
}
.htc-node {
  display: flex;
  width: 200px;
  height: 36px;
  line-height: 36px;
  border-radius: 4px;
  background: #ffffff;
  border: 1px solid #ccd1dc;
  box-shadow: 0 2px 5px 1px rgb(0 0 0 / 6%);
  color: #5c5c5c;
}
.htc-default-node {
  display: flex;
  margin-left: 6px;
  margin-top: 6px;
  width: 58px;
  height: 24px;
  line-height: 24px;
  border-radius: 4px;
  background: #ffffff;
  border: 1px solid #ccd1dc;
  box-shadow: 0 2px 5px 1px rgb(0 0 0 / 6%);
  color: #5c5c5c;
}
.left-side {
  display: flex;
  width: 36px;
  height: 36px;
  padding: 9px;
}
.center {
  width: 164px;
  height: 36px;
  font-size: 14px;
  text-align: center;
  /* 超过两行省略 */
  display: -webkit-box;
  overflow: hidden;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 1;
  /* 截断单词换行 */
  word-break: break-all;
  word-wrap: break-word;
  padding-left: 9px;
}
.right-side {
  display: flex;
  width: 36px;
  height: 36px;
  padding: 9px;
}
</style>
